<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Getting USB car audio working in a 2013 Honda Civic EX">
	<meta name="author" content="James Shubin">

	<title>USB Car Audio in a Civic - https://purpleidea.com/</title>
	<link rel="canonical" href="https://purpleidea.com/blog/2020/08/11/usb-car-audio-in-a-civic/">

	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/fontawesome-all.css" rel="stylesheet">
	<link href="/css/custom.css" rel="stylesheet">
	<link href="/css/staticman.css" rel="stylesheet">


	


</head>
<body>
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
					<span class="sr-only">Toggle Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="https://purpleidea.com/">purpleidea.com</a>
			</div>
			<div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">

					<li><a href="/about/">about</a></li>
					<li><a href="/blog/">blog</a></li>
					<li><a href="/projects/">projects</a></li>
					<li><a href="/talks/">talks</a></li>
					<li><a href="/misc/">misc</a></li>
					<li><a href="/contact/">contact</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container">

	<div class="row">
		<div class="col-md-9">
			<div class="well well-sm">
					<h3><strong>USB Car Audio in a Civic</strong><br><small>Getting USB car audio working in a 2013 Honda Civic EX</small></h3>
					<hr>
					<p>Transportation is very important to me. My whole life I&rsquo;ve never owned a car. I
have gotten by with biking, public transit, and various car sharing services.
Sadly, biking is incredibly dangerous and stressful, because most cars don&rsquo;t
respect bicycles, and in the winter it&rsquo;s not very practical, the
<a href="https://www.stm.info/en">STM</a> (public transit) offers an incredibly unreliable
and unpleasant service, and <a href="https://www.car2go.com/">Car2Go</a> (car sharing) now
requires that you use their proprietary smart phone app (you used to be able to
just swipe the membership card) so I finally gave up and decided to buy a used
car.</p>
<p>I ended up buying a used, manual, 2013 Honda Civic EX. It has a USB port, so
let&rsquo;s get this thing playing some <a href="https://en.wikipedia.org/wiki/Hip_hop_music">music</a>!</p>


<br /><span style="text-decoration:underline; font-weight: bold;">First attempts</span>:<br /><br />

<p>I put a bunch of songs on a USB key and plugged it in. Various failures occured&hellip;</p>
<p>(I had some images, but I seem to have lost them&hellip;)</p>
<p>Each attempt was a trip back to the car with a newly setup USB key. I eventually
brought my laptop into the car, and started iterating from the simplest possible
setup. I couldn&rsquo;t find any clear answers online, so I decided to document my
progress. The internets agreed:</p>

<table style="text-align:center; width:80%; margin:0 auto;"><tr><td>
<a href="poll.png"><img class="alignnone size-full" src="poll.png"  width="100%" /></a></td></tr><tr><td>I didn&#39;t even cheat on the percentages!</td></tr></table></br />

<p>Here&rsquo;s what I found that works:</p>


<br /><span style="text-decoration:underline; font-weight: bold;">The filesystem</span>:<br /><br />

<p>I formatted it with the CLI:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkfs.fat -n CAR /dev/sdx
</span></span></code></pre></div><p>Note that I specified a <em>SHORT</em> label name in <em>CAPS</em>, used <code>mkfs.fat</code> (not
<code>mkfs.exfat</code>) and used <code>/dev/sdb</code>, not <code>/dev/sdb1</code>. You&rsquo;ll want to substitute
the device name of your USB key. Look for it with <code>dmesg --follow</code>.</p>


<br /><span style="text-decoration:underline; font-weight: bold;">The files</span>:<br /><br />

<p>It seems that longer files names with mixed case worked just fine. If in doubt,
just name your files <code>ABCDEFGH.MP3</code>.</p>
<p>You will want to avoid non-mp3 files. You can find them with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>find . -type f -not -iname <span style="color:#b44">&#39;*.mp3&#39;</span>
</span></span></code></pre></div><p>I found that <code>.m4a</code> seemed to work as well, whereas <code>.flac</code> and <code>.ogg</code> did not.
It didn&rsquo;t hurt to have those files present, they just didn&rsquo;t show up.</p>
<p>To convert any of your existing files to <code>mp3</code>, you can use:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> i in *; <span style="color:#a2f;font-weight:bold">do</span> ffmpeg -i <span style="color:#b44">&#34;</span><span style="color:#b8860b">$i</span><span style="color:#b44">&#34;</span> <span style="color:#b44">&#34;</span><span style="color:#b68;font-weight:bold">${</span><span style="color:#b8860b">i</span>%.*<span style="color:#b68;font-weight:bold">}</span><span style="color:#b44">.mp3&#34;</span>; <span style="color:#a2f;font-weight:bold">done</span>
</span></span></code></pre></div><p>You can have files in the root directory or even within nested subfolders. I got
about three folders deep, but I&rsquo;m sure even deeper would work, to a point.</p>


<br /><span style="text-decoration:underline; font-weight: bold;">Sorting and play order</span>:<br /><br />

<p>I got it all working, but I noticed that my songs were out of order. You really
don&rsquo;t want the opening track on <a href="https://en.wikipedia.org/wiki/2001_(Dr._Dre_album)#Track_listing">2001</a>
playing in the middle of the album. It turns out that the car doesn&rsquo;t respect
either <code>.m3u</code> playlist files, or alphabetical ordering. It actually plays files
in the order they&rsquo;re stored in on the filesystem!</p>
<p>Thankfully, some wonderful hackers have already solved this problem. There&rsquo;s a
tool called <code>fatsort</code> (that&rsquo;s even packaged in Fedora) which will take an
existing filesystem, and re-order it so that the files are stored in the
ordering that you want. I used &ldquo;natural order&rdquo; sorting. You can run it with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo fatsort -n /dev/sdb1	<span style="color:#080;font-style:italic"># or check the order with -l</span>
</span></span></code></pre></div><p>My notes specified <code>/dev/sdb1</code>, not <code>/dev/sdb</code>. In case this doesn&rsquo;t work, you
can experiment with the other one. As usual, pick the actual device you&rsquo;re
using.</p>


<br /><span style="text-decoration:underline; font-weight: bold;">Why didn&#39;t I buy an electric car?</span><br /><br />

<p>Very simple!</p>
<ol>
<li>
<p>No place to charge. I don&rsquo;t own a home, and I don&rsquo;t have a dedicated parking
spot, so I don&rsquo;t have a good place to charge it. There are public chargers in my
city, but you can only park in them for up to four hours, so it ends up being a
nuisance.</p>
</li>
<li>
<p>Privacy. Most of them are giant piles of garbage software that you can&rsquo;t
control or audit, and which are constantly reporting back to the manufacturer.
This is a dystopian nightmare. Maybe climate change will get us first.</p>
</li>
<li>
<p>Cost. They&rsquo;re incredibly expensive. Hopefully this will get better over time.</p>
</li>
</ol>


<br /><span style="text-decoration:underline; font-weight: bold;">Conclusion</span>:<br /><br />

<p>Cars are becoming more like smartphones, and as a result we&rsquo;re getting stuck
with a bunch of proprietary spyware, which hurts all of the users. Hopefully we
can come together as consumers and mandate that safety critical devices like
cars, airplanes, and pacemakers be required to open source their code. Until
then, I&rsquo;ll be listening to my old-school hip-hop when I&rsquo;m on the road.</p>
<p>Happy Hacking,</p>
<p>James</p>
<p><br /><i>You can <a target="_blank" href="https://m9rx.com/">hire James</a> and his team at <a target="_blank" href="https://m9rx.com/">m9rx corporation</a>.</i>

<br /><i>You can <a target="_blank" href="https://mastodon.social/@purpleidea">follow James on Mastodon</a> for more frequent updates and other random thoughts.</i>

<br /><i>You can <a target="_blank" href="https://twitter.com/intent/follow?screen_name=purpleidea">follow James on Twitter</a> for more frequent updates and other random thoughts.</i>

<br /><i>You can <a target="_blank" href="https://github.com/sponsors/purpleidea/">support James on GitHub</a> if you'd like to help sustain this kind of content.</i>

<br /><i>You can <a target="_blank" href="https://www.patreon.com/purpleidea">support James on Patreon</a> if you'd like to help sustain this kind of content.</i>
</p>

			</div>
		</div>

		
		<div class="col-md-3">
			<div class="well well-sm"> 
				<h4>August 24, 2020<br>
				<small>778 words</small></h4>
				<hr>
				<strong>Categories</strong>
				<ul class="list-unstyled">
				
					<li><a href="/categories/technical">technical</a></li>
				
				</ul>
				<hr>
				<strong>Tags</strong><br>
				<a class="label label-default" href="/tags/civic">civic</a> <a class="label label-default" href="/tags/fat">fat</a> <a class="label label-default" href="/tags/fatsort">fatsort</a> <a class="label label-default" href="/tags/fedora">fedora</a> <a class="label label-default" href="/tags/gnu">gnu</a> <a class="label label-default" href="/tags/honda">honda</a> <a class="label label-default" href="/tags/linux">linux</a> <a class="label label-default" href="/tags/planetfedora">planetfedora</a> <a class="label label-default" href="/tags/usb">usb</a> 
				

				
				
				
			</div>
				<div class="panel panel-default">
		<div class="panel-heading" style="padding: 2px 15px;">
			<h4>Links...</h4>
		</div>
		<div class="panel-body">

			<a href="https://twitter.com/purpleidea" class="btn btn-info btn-xs"><i class="fa-brands fa-twitter-square fa-2x"></i></a>


			<a href="https://github.com/purpleidea/" class="btn btn-primary btn-xs"><i class="fa-brands fa-github-square fa-2x"></i></a>


			<a href="https://mastodon.social/@purpleidea" class="btn btn-primary btn-xs" style="background:#563ACC"><i class="fa-brands fa-mastodon fa-2x"></i></a>


	

			
		</div>
	</div>

		</div>
	</div>

	<div class="row">
		<hr>

	
<a name="comments"></a>
<section class="post-comments">
	<h3>Comments</h3>






	

	


	<p>Nothing yet.</p>

	<hr />
	<a name="comment"></a>
	<h3>Post a comment</h3>
	<form class="post-new-comment" method="POST" action="https://api.staticman.net/v2/entry/purpleidea/purpleidea.com/master/comments">
		<input type="hidden" name="options[redirect]" value="https://purpleidea.com/blog/2020/08/11/usb-car-audio-in-a-civic/#comment-submitted">
		<input type="hidden" name="options[entryId]" value="blog/2020/08/11/usb-car-audio-in-a-civic">
		<input type="hidden" name="options[reCaptcha][siteKey]" value="6Lc0u2EUAAAAAImKX7XafINIzeoLZFQCGFKF7qCp">
		<input type="hidden" name="options[reCaptcha][secret]" value="AEl4ul2uMOx2EL2LMm/84zzh8mWLYIYW&#43;v2EEu7webGOtAqyQiLBa6QLjPgnlyNjJxE3UeccxuBQIWqPzG96FsVl0AVTihhHt3OGR1hteAZUAhoJjnH&#43;7PoyC3x7d4KDLypopDn&#43;HzWowOpAZuvfHE08n&#43;G4omrP5fUfkOrH03A=">
		<div class="col-md-9">
			<div class="row">
				<textarea name="fields[message]" style="width: 80%; height: 50px;" class="post-comment-field" placeholder="Please enter your comment here..." rows="10"></textarea><br />
			</div>
			<div class="row">
				<input name="fields[name]" type="text" style="width: 50%;" class="post-comment-field" placeholder="Your name">
			</div>
			<div class="row">
				<input name="fields[email]" type="email" style="width: 50%;" class="post-comment-field" placeholder="Your email address">
			</div>
			<div class="row">
				<input name="fields[url]" type="text" style="width: 50%;" class="post-comment-field" placeholder="Your website">
			</div>
			<div class="row">
				<br />
				<div class="g-recaptcha" data-sitekey="6Lc0u2EUAAAAAImKX7XafINIzeoLZFQCGFKF7qCp"></div>
				<script src='https://www.google.com/recaptcha/api.js'></script>
				(sorry but the spammers were getting too crazy!)
			</div>
			<div class="row">
				<input type="submit" style="width: 80%;" class="post-comment-field btn btn-primary btn-xs" value="Submit">
			</div>
		</div>
	</form>
</section>

<div id="comment-submitted" class="dialog">
	<hr />
	<h3>Thank you</h3>
	<p>Your comment has been submitted and will be published if it gets approved.</p>
	<p><a href="https://github.com/purpleidea/purpleidea.com/pulls">Click here</a> to see the patch you generated.</p>
	<p><a href="#" class="btn">OK</a></p>
</div>


	</div>
		<footer>
		<div class="row">
			<hr>
			<div class="col-sm-12">
				<p>
				&copy; James Shubin 2025 &middot;
				<a href="https://purpleidea.com/">https://purpleidea.com/</a>
				
					&middot;
					<a href="https://github.com/purpleidea/purpleidea.com/blob/master/content/blog/2020/08/11/usb-car-audio-in-a-civic.md" style="color:grey">Edit this page</a>
				
				</p>
			</div>
		</div>
		</footer>
	</div>

	<script src="/js/jquery-1.11.3.min.js"></script>
	<script src="/js/bootstrap.js"></script>
</body>
</html>

